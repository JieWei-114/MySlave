<div class="layout">
  <app-sidebar
    class="sidebar"
    [class.collapsed]="sidebarCollapsed"
    [sessions]="store.visibleSessions()"
    [activeId]="store.currentSessionId()"
    [showTools]="showTools"
    (newSession)="onNewChat()"
    (selectSession)="onSelectChat($event)"
    (deleteSession)="onDeleteChat($event)"
    (renameSession)="onRenameChat($event)"
    (toggleTools)="toggleTools()"
    (toggleSidebar)="toggleSidebar()"
    [collapsed]="sidebarCollapsed"
  />

  <main class="content">
    <router-outlet />
  </main>

  <app-memory-panel
    *ngIf="showTools"
    [sessionId]="store.currentSessionId()!"
    (close)="showTools = false"
    class="memory-drawer"
    id="memory-panel"
  />
</div>