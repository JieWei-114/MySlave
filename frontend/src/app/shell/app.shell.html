<div class="layout">
  <app-sidebar
    class="sidebar"
    [class.collapsed]="sidebarCollapsed"
    [sessions]="store.visibleSessions()"
    [activeId]="store.currentSessionId()"
    [showMemory]="showMemory"
    (newSession)="onNewChat()"
    (selectSession)="onSelectChat($event)"
    (deleteSession)="onDeleteChat($event)"
    (renameSession)="onRenameChat($event)"
    (toggleMemory)="toggleMemory()"
    (toggleSidebar)="toggleSidebar()"
    [collapsed]="sidebarCollapsed"
  />

  <main class="content">
    <router-outlet />
  </main>

  <app-memory-panel
    *ngIf="showMemory"
    [sessionId]="store.currentSessionId()!"
    (close)="showMemory = false"
    class="memory-drawer"
    id="memory-panel"
  />
</div>
